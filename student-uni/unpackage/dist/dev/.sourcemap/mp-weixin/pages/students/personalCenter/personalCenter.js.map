{"version":3,"sources":["webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/main.js","webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue?b27e","webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue?92d2","webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue?95a0","webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue?0bc7","webpack:///C:/Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue"],"names":["createPage","Page","components","uniSection","uniList","uniListItem","uniNavBar","onShow","$store","dispatch","getOffileFilesSize","computed","badge","total_size","parseInt","isLogin","getters","getUserInfo","UserID","userLogo","Logo","RealName","UnitName","data","current_head_cookie","input_head_cookie","username","password","methods","clearOfflineFiles","that","console","log","uni","showModal","cancelText","confirmText","title","content","success","r","confirm","setStorageSync","getSavedFileList","r_fs","file_count","fileList","length","del_count","forEach","f","removeSavedFile","filePath","showToast","toMyOffline","navigateTo","url","JSON","stringify","map","size","_size","login","_p","_u","sign","timestamp","encoded_passwrod","token","sid","appid","http","request","method","then","fr","Code","Data","r_p","header","r3","Head","ErrorCode","Body","ErrorMessage","icon","exit","userInfo","commit"],"mappings":"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","file":"pages/students/personalCenter/personalCenter.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/students/personalCenter/personalCenter.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./personalCenter.vue?vue&type=template&id=61b9bb82&\"\nvar renderjs\nimport script from \"./personalCenter.vue?vue&type=script&lang=js&\"\nexport * from \"./personalCenter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\fastwarews\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('61b9bb82')) {\n      api.createRecord('61b9bb82', component.options)\n    } else {\n      api.reload('61b9bb82', component.options)\n    }\n    module.hot.accept(\"./personalCenter.vue?vue&type=template&id=61b9bb82&\", function () {\n      api.rerender('61b9bb82', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/Naga/Documents/GitHub/student_ubiapp/student-uni/pages/students/personalCenter/personalCenter.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./personalCenter.vue?vue&type=template&id=61b9bb82&\"","var components = {\n  \"uni-nav-bar\": () =>\n    import(/* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"),\n  \"uni-list\": () =>\n    import(/* webpackChunkName: \"components/uni-list/uni-list\" */ \"@/components/uni-list/uni-list.vue\"),\n  \"uni-list-item\": () =>\n    import(/* webpackChunkName: \"components/uni-list-item/uni-list-item\" */ \"@/components/uni-list-item/uni-list-item.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./personalCenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../fastwarews/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./personalCenter.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport uniNavBar from '@/components/uni-nav-bar/uni-nav-bar.vue';\r\nimport uniSection from '@/components/uni-section/uni-section.vue';\r\nimport uniList from '@/components/uni-list/uni-list.vue';\r\nimport uniListItem from '@/components/uni-list-item/uni-list-item.vue';\r\nimport http from '@/common/request.js';\r\nexport default {\r\n\tcomponents: {\r\n\t\tuniSection,\r\n\t\tuniList,\r\n\t\tuniListItem,\r\n\t\tuniNavBar\r\n\t},\r\n\tonShow() {\r\n\t\t// this.login();\r\n\r\n\t\tthis.$store.dispatch('getUserInfo');\r\n\r\n\t\tthis.getOffileFilesSize();\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t// 缓存文件大小\r\n\t\tbadge() {\r\n\t\t\t// 如果是多少K\r\n\t\t\tif (this.total_size <= 1024 * 1024) {\r\n\t\t\t\treturn parseInt(this.total_size / 1024) + 'K';\r\n\t\t\t}\r\n\t\t\t// 如果是多少M\r\n\t\t\tif (this.total_size > 1024 * 1024 && this.total_size <= 1024 * 1024 * 1024) {\r\n\t\t\t\treturn parseInt(this.total_size / (1024 * 1024)) + 'M';\r\n\t\t\t}\r\n\t\t\t// 大于1个g都按照g算\r\n\r\n\t\t\treturn parseInt(this.total_size / (1024 * 1024 * 1024)) + 'G';\r\n\t\t},\r\n\r\n\t\t// 是否已经登陆\r\n\t\tisLogin() {\r\n\t\t\treturn this.$store.getters.getUserInfo.UserID;\r\n\t\t},\r\n\r\n\t\tuserLogo() {\r\n\t\t\treturn this.$store.getters.getUserInfo.Logo;\r\n\t\t},\r\n\t\tRealName() {\r\n\t\t\treturn this.$store.getters.getUserInfo.RealName;\r\n\t\t},\r\n\t\tUnitName() {\r\n\t\t\treturn this.$store.getters.getUserInfo.UnitName;\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcurrent_head_cookie: '',\r\n\t\t\tinput_head_cookie: '',\r\n\t\t\tusername: 'stu_qiaokuoyuan',\r\n\t\t\tpassword: '123456',\r\n\t\t\ttotal_size: 0\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 清除缓存文件\r\n\t\tclearOfflineFiles() {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('clearOfflineFiles');\r\n\t\t\tuni.showModal({\r\n\t\t\t\tcancelText: '取消',\r\n\t\t\t\tconfirmText: '确定',\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要删除吗',\r\n\t\t\t\tsuccess(r) {\r\n\t\t\t\t\t// 如过确定删除\r\n\t\t\t\t\tif (r.confirm) {\r\n\t\t\t\t\t\tuni.setStorageSync('download_task', '[]');\r\n\r\n\t\t\t\t\t\t// 先获取已经缓存的文件\r\n\t\t\t\t\t\tuni.getSavedFileList({\r\n\t\t\t\t\t\t\tsuccess(r_fs) {\r\n\t\t\t\t\t\t\t\tlet file_count = r_fs.fileList.length;\r\n\t\t\t\t\t\t\t\tlet del_count = 0;\r\n\t\t\t\t\t\t\t\tr_fs.fileList.forEach(f => {\r\n\t\t\t\t\t\t\t\t\tuni.removeSavedFile({\r\n\t\t\t\t\t\t\t\t\t\tfilePath: f.filePath,\r\n\t\t\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t\t\t++del_count;\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('已经删除' + del_count + '个');\r\n\t\t\t\t\t\t\t\t\t\t\tif (del_count == file_count) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '删除完成'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 跳转到离线文件\r\n\t\ttoMyOffline() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../offlineFiles/offlineFiles'\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取离线缓存文件大小\r\n\t\tgetOffileFilesSize() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.getSavedFileList({\r\n\t\t\t\tsuccess(r) {\r\n\t\t\t\t\tconsole.log('fs==>', JSON.stringify(r));\r\n\t\t\t\t\tthat.total_size = 0;\r\n\t\t\t\t\tr.fileList\r\n\t\t\t\t\t\t.map(f => {\r\n\t\t\t\t\t\t\treturn f.size;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forEach(_size => {\r\n\t\t\t\t\t\t\tthat.total_size += _size;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 登陆方法\r\n\t\tlogin() {\r\n\t\t\tlet that = this;\r\n\r\n\t\t\tlet _p = that.password;\r\n\t\t\tlet _u = that.username;\r\n\r\n\t\t\tlet sign = '';\r\n\t\t\tlet timestamp = '';\r\n\t\t\tlet encoded_passwrod = '';\r\n\t\t\tlet token = '';\r\n\t\t\tlet sid = '';\r\n\t\t\tlet appid = '';\r\n\r\n\t\t\t// 先获取sign\r\n\t\t\thttp.request({\r\n\t\t\t\turl: '/api/nologin/getsign',\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t}).then(r => {\r\n\t\t\t\tr = that.fr(r);\r\n\t\t\t\tif (r.Code == 200) {\r\n\t\t\t\t\tsign = r.Data.sign;\r\n\t\t\t\t\ttimestamp = r.Data.timestamp;\r\n\r\n\t\t\t\t\t// 加密密码\r\n\t\t\t\t\thttp.request({\r\n\t\t\t\t\t\turl: '/api/nologin/GetEncodePass?password=' + _p\r\n\t\t\t\t\t}).then(r_p => {\r\n\t\t\t\t\t\tr_p = that.fr(r_p);\r\n\t\t\t\t\t\tif (r_p.Code == 200) {\r\n\t\t\t\t\t\t\tencoded_passwrod = r_p.Data;\r\n\r\n\t\t\t\t\t\t\t// 根据加密后的密码 获取token\r\n\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl: `https://ve.cnki.net/sso/m/login?appId=coeduapi&name=${_u}&pass=${encoded_passwrod}&code=local`,\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\tappid: 'coeduapi',\r\n\t\t\t\t\t\t\t\t\tsign: sign,\r\n\t\t\t\t\t\t\t\t\ttimestamp: timestamp\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).then(r3 => {\r\n\t\t\t\t\t\t\t\tr3 = that.fr(r3);\r\n\r\n\t\t\t\t\t\t\t\tif (r3.Head.ErrorCode == 0) {\r\n\t\t\t\t\t\t\t\t\t// 如过密码正确\r\n\t\t\t\t\t\t\t\t\ttoken = r3.Body.token;\r\n\t\t\t\t\t\t\t\t\tconsole.log('token is==>', token);\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('token', token);\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('sid', sid);\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '登陆成功'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tthat.$store.dispatch('getUserInfo');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// 如过密码错误\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: r3.Head.ErrorMessage,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 退出方法\r\n\t\texit() {\r\n\t\t\t// 清空token和sid\r\n\t\t\tuni.setStorageSync('token', '');\r\n\t\t\tuni.setStorageSync('sid', '');\r\n\r\n\t\t\t// 清空用户信息  UserID\r\n\t\t\tlet userInfo = this.$store.getters.getUserInfo;\r\n\t\t\tuserInfo.UserID = 0;\r\n\r\n\t\t\t// 将每个参数都改成空\r\n\r\n\t\t\t// let userInfo2 = { ...userInfo };\r\n\t\t\t// let keys = Object.keys(userInfo2);\r\n\r\n\t\t\t// console.log('kyes:', keys);\r\n\t\t\t// keys.forEach(k => {\r\n\t\t\t// \tuserInfo2[k] = '';\r\n\t\t\t// });\r\n\r\n\t\t\tconsole.log('new userInfo:', JSON.stringify(userInfo));\r\n\t\t\tthis.$store.commit('setUserInfo', userInfo);\r\n\t\t\tconsole.log('new userInfo:', JSON.stringify(userInfo));\r\n\t\t}\r\n\t}\r\n};\r\n"],"sourceRoot":""}